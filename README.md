# نظام إدارة الورشة

نظام شامل لإدارة ورشة العمل يتضمن إدارة العملاء، المخزون، المبيعات، الإيرادات، المصروفات، وسحب المخزون.

## المميزات الرئيسية

### إدارة العملاء
- إضافة عملاء جدد
- تعديل بيانات العملاء
- حذف العملاء
- عرض قائمة العملاء

### إدارة المخزون
- إضافة مواد جديدة للمخزون
- **تعديل بيانات المواد** ✨
- **حذف المواد** ✨
- مراقبة الكميات وحدود التنبيه
- تصدير تقارير المخزون

### إدارة المبيعات
- تسجيل عمليات البيع
- **تعديل عمليات البيع** ✨
- **حذف عمليات البيع** ✨
- ربط المبيعات بالعملاء
- تصدير تقارير المبيعات

### إدارة الإيرادات
- تسجيل الإيرادات من مصادر مختلفة
- **تعديل الإيرادات** ✨
- **حذف الإيرادات** ✨
- ربط الإيرادات بالعملاء
- تصدير تقارير الإيرادات

### سحب المخزون
- تسجيل عمليات سحب المواد
- **تعديل عمليات السحب** ✨
- **حذف عمليات السحب** ✨
- ربط السحوبات بالعملاء
- تحديث المخزون تلقائياً

### إدارة المصروفات
- تسجيل المصروفات
- تعديل المصروفات
- حذف المصروفات
- رفع ملفات مرفقة
- تصدير تقارير المصروفات

### التقارير المالية
- تقارير الإيرادات والمصروفات
- تقارير المبيعات
- تقارير سحب المخزون
- رسوم بيانية تفاعلية
- تصدير التقارير بصيغ مختلفة (Excel, PDF)

## التحديثات الجديدة ✨

### وظائف التعديل والحذف
تم إضافة وظائف التعديل والحذف لجميع الصفحات الرئيسية:

1. **صفحة المبيعات**: يمكن الآن تعديل وحذف عمليات البيع
2. **صفحة الإيرادات**: يمكن الآن تعديل وحذف الإيرادات
3. **صفحة سحب المخزون**: يمكن الآن تعديل وحذف عمليات السحب
4. **صفحة المخزون**: تحتوي بالفعل على وظائف التعديل والحذف

### المميزات الجديدة:
- **تعديل مباشر**: يمكن تعديل البيانات مباشرة في الجدول
- **حذف آمن**: تأكيد قبل الحذف لتجنب الأخطاء
- **تحديث تلقائي**: تحديث البيانات فوراً بعد التعديل أو الحذف
- **تحقق من البيانات**: التحقق من صحة البيانات قبل الحفظ

## التثبيت والتشغيل

### المتطلبات
- Node.js (الإصدار 14 أو أحدث)
- npm أو yarn

### تثبيت التبعيات
```bash
# تثبيت تبعيات الباك إند
cd backend
npm install

# تثبيت تبعيات الفرونت إند
cd ../frontend
npm install
```

### تشغيل النظام
```bash
# تشغيل الباك إند (المنفذ 3001)
cd backend
npm start

# تشغيل الفرونت إند (المنفذ 3000)
cd ../frontend
npm start
```

### الوصول للنظام
- الفرونت إند: http://localhost:3000
- الباك إند API: http://localhost:3001

## هيكل المشروع

```
workshop-management/
├── backend/
│   ├── src/
│   │   ├── index.js          # الخادم الرئيسي
│   │   ├── addAdminUser.js   # إضافة مستخدم مدير
│   │   ├── addTestData.js    # إضافة بيانات تجريبية
│   │   └── resetPassword.js  # إعادة تعيين كلمة المرور
│   ├── database/
│   │   └── workshop.db       # قاعدة البيانات
│   └── uploads/              # مجلد الملفات المرفوعة
├── frontend/
│   ├── src/
│   │   ├── components/       # المكونات المشتركة
│   │   ├── pages/           # صفحات التطبيق
│   │   ├── services/        # خدمات API
│   │   └── contexts/        # سياقات React
│   └── public/              # الملفات العامة
└── README.md
```

## API Endpoints

### المبيعات
- `GET /api/sales` - جلب جميع المبيعات
- `POST /api/sales` - إضافة عملية بيع جديدة
- `PUT /api/sales/:id` - تعديل عملية بيع ✨
- `DELETE /api/sales/:id` - حذف عملية بيع ✨

### الإيرادات
- `GET /api/incomes` - جلب جميع الإيرادات
- `POST /api/incomes` - إضافة إيراد جديد
- `PUT /api/incomes/:id` - تعديل إيراد ✨
- `DELETE /api/incomes/:id` - حذف إيراد ✨

### سحب المخزون
- `GET /api/inventory/withdrawals` - جلب جميع السحوبات
- `POST /api/inventory/withdraw` - إضافة سحب جديد
- `PUT /api/inventory/withdrawals/:id` - تعديل سحب ✨
- `DELETE /api/inventory/withdrawals/:id` - حذف سحب ✨

### المخزون
- `GET /api/inventory` - جلب جميع المواد
- `POST /api/inventory` - إضافة مادة جديدة
- `PUT /api/inventory/:id` - تعديل مادة
- `DELETE /api/inventory/:id` - حذف مادة

## قاعدة البيانات

النظام يستخدم SQLite كقاعدة بيانات محلية. الجداول الرئيسية:

- `users` - المستخدمين
- `customers` - العملاء
- `sales` - المبيعات
- `incomes` - الإيرادات
- `expenses` - المصروفات
- `inventory` - المخزون
- `inventory_withdrawals` - سحب المخزون

## الأمان

- مصادقة JWT للمستخدمين
- تشفير كلمات المرور
- حماية من CSRF
- التحقق من صحة البيانات

## الدعم

لأي استفسارات أو مشاكل، يرجى التواصل مع فريق التطوير.

---

**تم تطوير هذا النظام باستخدام:**
- Frontend: React.js
- Backend: Node.js + Express.js
- Database: SQLite
- Authentication: JWT 